<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>3D Kompass - WebGL2</title>
    <style>
        body { margin: 0; }
        canvas { width: 100vw; height: 100vh; display: block; }
        .instructions {
            position: absolute;
            top: 10px; left: 10px;
            background: rgba(255,255,255,0.8);
            padding: 10px; border-radius: 5px;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
<canvas id="glcanvas"></canvas>

<div class="instructions">
    <p>W/S/A/D: Move camera | Q/E: Up/Down</p>
    <p>N/M: Rotate compass | V/B: Zoom in/out</p>
    <p>R: Reset camera | 1, 2, 3: Preset for cam</p>
</div>

<!-- Vertex shader -->
<script id="vs" type="x-shader/x-vertex">#version 300 es
precision highp float;

in vec3 aPosition;
in vec3 aNormal;

uniform mat4 uMVP;
uniform mat4 uModel;

out vec3 vNormal;

void main() {
    vNormal = mat3(uModel)*aNormal;
    gl_Position = uMVP * vec4(aPosition,1.0);

    // Punkter
    gl_PointSize = 8.0;
}
</script>

<!-- Fragment shader -->
<script id="fs" type="x-shader/x-fragment">#version 300 es
precision highp float;

in vec3 vNormal;
uniform vec4 uColor;
out vec4 outColor;

void main() {
    vec3 n = normalize(vNormal);
    float lam = max(dot(n,vec3(0.5,1.0,0.8)),0.0)*0.8 + 0.2;
    outColor = vec4(uColor.rgb*lam,uColor.a);
}
</script>

<!-- Main JS -->
<script type="module" src="./js/main.js"></script>

</body>
</html>
